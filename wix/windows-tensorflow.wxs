<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Module Id="dt.compnerd.org.SwiftRuntime.TensorFlow"
          Language="1033"
          Version="2.1.0.9999" >
    <Package Comments="Copyright 2020 Saleem Abdulrasool &lt;compnerd@compnerd.org&gt;"
             Compressed="yes"
             InstallScope="perMachine"
             Manufacturer="dt.compnerd.org"
             Description="TensorFlow" />

    <!-- Directory Structure -->
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="WINDOWSVOLUME">
        <Directory Id="LIBRARY" Name="Library">
          <Directory Id="TENSORFLOW" Name="tensorflow-2.1.0-rc1">
            <Directory Id="TENSORFLOW_USR" Name="usr">
              <Directory Id="TENSORFLOW_USR_BIN" Name="bin">
              </Directory>
            </Directory>
          </Directory>
        </Directory>
      </Directory>
    </Directory>

    <SetDirectory Id="WINDOWSVOLUME" Value="[WindowsVolume]" />

    <!-- Components -->
    <DirectoryRef Id="TENSORFLOW_USR_BIN">
      <Component Id="TENSORFLOW_RUNTIME" Guid="92056aaf-9b0d-437a-82da-24484380479a">
        <File Id="TENSORFLOW_DLL" Source="$(var.TensorFlow_ROOT)\Library\tensorflow-2.1.0-rc1\usr\bin\tensorflow.dll" Checksum="yes" />
      </Component>
    </DirectoryRef>

    <DirectoryRef Id="TARGETDIR">
      <Component Id="ENV_VARS" Guid="93a272cb-e23f-4263-85f5-f313bbb15500">
        <Environment Id="PATH" Action="set" Name="PATH" Part="last" Permanent="no" System="yes" Value="[WindowsVolume]Library\tensorflow-2.1.0-rc1\usr\bin" />
      </Component>
    </DirectoryRef>
  </Module>
</Wix>
